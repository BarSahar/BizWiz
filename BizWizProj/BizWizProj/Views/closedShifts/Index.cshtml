<script src="@Url.Content("~/Scripts/DayPilot/daypilot-all.min.js")" type="text/javascript"></script>
<br />
<br />
<br />
<br />

<div style="float:left; width: 160px;">
    <div id="nav">
   @*     @Html.DayPilotNavigator("nav", new DayPilotNavigatorConfig
   {
       BoundDayPilot = "nav",
       SelectMode = DayPilot.Web.Mvc.Enums.Navigator.NavigatorSelectMode.Week,
       BindCommand
       TimeRangeSelectedJavaScript = "navigate()"
   })*@
    </div>
</div>

<div style="margin-left: 160px;">
    <div id="dp">
    
    @Html.DayPilotCalendar("dp", new DayPilot.Web.Mvc.DayPilotCalendarConfig
{

    BackendUrl = Url.Action("Backend", "modelShifts"),
    ViewType = DayPilot.Web.Mvc.Enums.Calendar.ViewType.Week,
    EventDeleteHandling = DayPilot.Web.Mvc.Events.Calendar.EventDeleteHandlingType.CallBack,
    TimeFormat = DayPilot.Web.Mvc.Enums.TimeFormat.Clock24Hours,
})
    </div>
</div>
<script type="text/javascript">
    var nav = new DayPilot.Navigator("nav");
    nav.showMonths = 3;
    nav.skipMonths = 3;
    nav.selectMode = "week";
    nav.init();

    nav.onTimeRangeSelected = function (args) {
        debugger;

        dp.startDate = args.day;
        dp.update();
        loadEvents();
    };

    function loadEvents() {
        dp.commandCallBack('navigate');
        $.post("closedShifts/Events",
        {
            start: dp.visibleStart().toString(),
            end: dp.visibleEnd().toString()
        },
        function (data) {
            dp.events.list = data;
            dp.update();
        });
    }
       
</script>